%%============================ Compiler Directives =======================%%
%%                                                                        %%
% !TeX program = lualatex
% !TeX encoding = utf8
% !TeX spellcheck = english
%%                                                                        %%
%%============================== Document Class ==========================%%
%%                                                                        %%
\usepackage{ifluatex}
%%                                                                        %%
%%========================================================================%%
\ifluatex
\usepackage[TS1,T1]{fontenc}
\usepackage{mlmodern}
%%================= Issue with mlmodern and siunitx fix! =================%%
%%                                                                        %%
%%========================================================================%%
\let\oldtextmu\textmu
\renewcommand{\textmu}{{\fontencoding{TS1}\fontfamily{mlmr}\selectfont\oldtextmu}}
%%                                                                        %%
%%========================================================================%%
%\defaultfontfeatures{Ligatures={TeX}}
\directlua{pdf.setminorversion(7)}
\else
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{mlmodern}		% Latin Modern font type
\fi

\usepackage{siunitx}        % SI units
\sisetup{%
	inter-unit-product = \ensuremath,
	prefix-mode = combine-exponent,
	drop-zero-decimal,
	%range-units=single,
}
\DeclareSIPrefix\micro{\text{\textmu}}{-6}

% Localization
%\usepackage[hangul]{kotex}			% Korean typesetting
%\usepackage[bidi=default]{babel}
%\babelprovide[main, import]{english}
%\babelprovide[import=ko]{korean}
%\babelprovide[import=da]{danish}

% Basic thesis packages
\usepackage{geometry}     % Package for changing page margins (before fancyhdr)
\usepackage{fancyhdr}       % Package to change header and footer
\usepackage{parskip}        % Package to tweak paragraph skipping (instead of indents a small skip is added after every paragraph)
\usepackage{titlesec}
%\usepackage{tikz}           % Package for drawing
\usepackage{pgfplots}       % Package for creating graphs and charts
\usepackage{xcolor}         % Package for defining DTU colours to be used
\selectcolormodel{natural}
\usepackage{ninecolors}
\selectcolormodel{rgb}
\usepackage{amsmath}        % For aligning equations among other
\usepackage{mathtools}		% Extensible symbols, brackets, arrows, etc

%\usepackage{sectsty}
%\usepackage{sfmath}			% Sans serif math
\usepackage{nicefrac}		% Neat inline fractions
\usepackage{listings}       % Package for inserting code, (before cleveref)
\usepackage[chapter]{minted}
%\setminted{autogobble,linenos=true,breaklines,labelposition=all}
\usepackage[most, minted]{tcolorbox}
%\usepackage[most]{tcolorbox}
%\tcbuselibrary{listings, breakable, skins}
\PassOptionsToPackage{hyphens}{url} % Ability to line break urls at hyphens
\usepackage{hyperref}       % Package for cross referencing (also loads url package)
\usepackage{cleveref}       % improved cross referencing
\usepackage{textcomp}       % \textdegree = Â°C and other useful symbols
\usepackage{caption}        % better captions
\usepackage{subcaption}     % for subfigures
\usepackage{csquotes}       % For biblatex with babel
%\usepackage[backend=biber,style=numeric,sorting=none]{biblatex} % Package for bibliography (citing)
\usepackage[backend=biber,style=ieee,backref=false,abbreviate=true,dateabbrev=false,alldates=long,sorting=ynt,dashed=false,block=space,maxcitenames=3,maxbibnames=9]{biblatex} % Package for bibliography (citing)
\bibliography{bib_bibertool.bib}

% Tables
\usepackage{float}          % floating figures in correct places
\usepackage{adjustbox}				% Adjust table widths (?)
\usepackage{nth}			% 1st, 2nd, etc
\usepackage{tabularray}		% latex3 tables
\UseTblrLibrary{booktabs,siunitx,varwidth}

% Extras
\let\ordinal\relax          % Remove warning from ordinal definition (datetime package)
\usepackage{datetime}		% For dates and time functions
\usepackage[automake=immediate,toc, % Abbreviations and glossary lists
abbreviations,
postdot,
hyperfirst=true,
nopostdot=true,
nonumberlist=true,
nowarn,
]{glossaries-extra}
\usepackage{glossary-longextra} % Long booktabs table style
\usepackage[numbib]{tocbibind} % Lists of... in toc
%\usepackage{tocloft}		% Customising toc
%\usepackage{calc}           % Adds ability for latex to calculate (3pt+2pt)
\usepackage{blindtext}
\usepackage{graphicx}
\graphicspath{{Figures/}} %Setting the graphicspath
\usepackage{svg}
\usepackage[colorinlistoftodos]{todonotes} % Margin coloured todonotes
\usepackage{pdflscape}
% Drawing
\usepackage{tikz}					% Create graphics
\usetikzlibrary{arrows,backgrounds,positioning,fit,petri}
\usepackage{xstring}				% For manipulating strings. Required by CircuiTikZ
\usepackage[american,arrowmos,nooldvoltagedirection]{circuitikz}	% Create circuit graphics (using TikZ)

\usepackage[verbose=silent,protrusion=true,expansion=true,final,babel]{microtype} % Better text appearance
\usepackage{hyphenat}			% Prevent hyphenation by \nohyphens{text}